<html>

<body>
    <canvas id="myCanvas" width="3000" height="3000"></canvas>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script>
    var canvas = document.getElementById('myCanvas');
    var context = canvas.getContext('2d');

    var data = { "realFrom": -2, "realTo": 1, "imgFrom": -1, "imgTo": 1, "interval": 0.01, "max_iter": 255 }
    var myArr;

    $(function() {
        console.log( "ready!" );

        $.ajax({
            type: "POST",
            url: "http://localhost:8080",
            data: JSON.stringify(data),
            contentType: "application/json",
            async: false,
            success: function(res) {
                console.log("success");
                myArr = res;
            }
        });

        // (realTo - realFrom) / interval
        var a =  (data.realTo - data.realFrom) / data.interval
        var y = 0
        var x = 0
        var counter = 0

        console.log(a);

        for (var i = 0; i < myArr.length; i++) {
            context.beginPath();
            context.rect(x*4, y*4, 4, 4);
            // context.fillStyle = '#' + myArr[i];
            // context.fillStyle ='#'+myArr[i]+myArr[i]+myArr[i];
            var color=myArr[i].toString(16);
            context.fillStyle ='#'+color+color+color;
            context.fill();
            counter++;
            x++

            if (counter >= a) {
                y += 1;
                counter = 0;
                x = 0;
            }
        }
    });
    </script>
</body>

</html>